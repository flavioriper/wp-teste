function gmwPopupInfoWindow(o){this["class"]=o["class"]||"gmw-info-window popup",this.content=o.content||"",this.closeButton=o.closeButton||!1,this.closeButtonIcon=o.closeButtonIcon||"gmw-icon-cancel-circled",this.draggableButtonIcon=o.draggableButtonIcon||"gmw-icon-menu",this.loader=o.loader||!1,this.draggable=o.draggable||!1,this.fadeSpeed=o.fadeSpeed||"fast",this.popupElement=null}gmwPopupInfoWindow.prototype.open=function(){var o=this;o.popupElement='<div style="display:none" id="gmw-popup-info-window" class="'+this["class"]+'">';var n=o.getButtons();""!=n&&(o.popupElement+=n),o.popupElement+=this.content,this.loader&&(o.popupElement+='<i class="iw-loader gmw-icon-spin-light animate-spin"></i>'),o.popupElement+="</div>",o.popupElement=jQuery(o.popupElement),o.popupElement.appendTo("body").fadeIn(this.fadeSpeed,function(){jQuery(this).find(".iw-close-button").click(function(){o.close()})})},gmwPopupInfoWindow.prototype.getButtons=function(){var o="";return this.draggable&&(o+='<span class="gmw-draggable '+this.draggableButtonIcon+'" data-draggable="gmw-popup-info-window" data-containment="window"></span>'),this.closeButton&&(o+='<span class="iw-close-button '+this.closeButtonIcon+'"></span>'),""!=o&&(o='<div class="buttons-wrapper">'+o+"</div>"),o},gmwPopupInfoWindow.prototype.setContent=function(o){jQuery(o).hide().appendTo("#gmw-popup-info-window").show()},gmwPopupInfoWindow.prototype.close=function(){this.popupElement.fadeOut(this.fadeSpeed,function(){jQuery(this).remove()})},GMW_Map.prototype.spiderfiers=!1,GMW_Map.prototype.getIwClassName=function(o){var n=o,e="gmw-info-window "+n.infoWindow+" map-"+n.id+" "+n.prefix;return 1==n.infoWindowAjax&&(e+=" ajax template-"+n.getIwTemplateName(n.infoWindowTemplate)),e},GMW_Map.prototype.iwContentXhr=[],GMW_Map.prototype.getIwAjaxContent=function(o,n){var e=this;GMW_Map.prototype.iwContentXhr[e.id]&&GMW_Map.prototype.iwContentXhr[e.id].abort();var i=e.locations[o];GMW.apply_filters("gmw_ps_map_ajax_form_data_include_results",!1,e)||(e.gmw_form.results=null),GMW_Map.prototype.iwContentXhr[e.id]=jQuery.ajax({type:"post",data:{action:"gmw_info_window_init",location:i,form_id:e.id,prefix:e.prefix,form:e.gmw_form},url:gmwAjaxUrl,success:function(o){jQuery(".gmw-info-window.map-"+e.id).not(".gmw-info-window.user-marker").append(o),"infobubble"==e.infoWindow&&(e.infoWindowTypes.infobubble.resize(e),jQuery(".gmw-info-window.infobubble .iw-close-button").click(function(){e.infoWindowTypes.infobubble.close(e)})),jQuery(".gmw-info-window .iw-loader").hide()}}).fail(function(o,n,e){window.console&&window.console.log&&(console.log(n+": "+e),o.responseText&&console.log(o.responseText))}).done(function(o){})},"undefined"!=typeof GMW_Map_Providers.google_maps&&(GMW_Map_Providers.google_maps.markerGroupingTypes.markers_clusterer={init:function(o){"function"==typeof MarkerClusterer&&(o.clusters=new MarkerClusterer(o.map,o.markers,{imagePath:o.clustersPath,clusterClass:o.prefix+"-cluster cluster",maxZoom:15}))},clear:function(o){"function"==typeof MarkerClusterer&&0!=o.clusters&&o.clusters.clearMarkers()},addMarker:function(o,n){n.clusters.addMarker(o)},markerClick:function(o,n){google.maps.event.addListener(o,"click",function(){n.markerClick(this)})}},GMW_Map_Providers.google_maps.markerGroupingTypes.markers_spiderfier={init:function(o){if("function"==typeof OverlappingMarkerSpiderfier){var n={legWeight:3,markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0,keepSpiderfied:!0};n=GMW.apply_filters("gmw_map_spiderfire_options",n,self),n=GMW.apply_filters("gmw_map_spiderfier_options",n,self),o.spiderfiers=new OverlappingMarkerSpiderfier(o.map,n)}o.spiderfiers.addListener("click",function(n){o.markerClick(n)})},clear:function(o){},addMarker:function(o,n){o.setMap(self.map),n.spiderfiers.addMarker(o)},markerClick:function(o,n){}},GMW_Map_Providers.google_maps.infoWindowTypes={standard:{open:function(o,n){var e=n,i=e.getIwClassName(n),t="";t=1==e.infoWindowAjax?'<i class="iw-loader gmw-icon-spin-light animate-spin"></i>':o.gmwData.iwContent;var a=GMW.apply_filters("gmw_info_window_options",{content:'<div class="'+i+'">'+t+"</div>",maxWidth:200},e,"standard");e.activeInfoWindow=new google.maps.InfoWindow(a),e.activeInfoWindow.open(e.map,o),1==e.infoWindowAjax&&e.getIwAjaxContent(o.gmwData.markerCount,o)},close:function(o){o.activeInfoWindow&&(o.activeInfoWindow.close(),o.activeInfoWindow=null)}},infobubble:{open:function(o,n){var e=this,i=n,t=i.getIwClassName(n),a="";a=1==i.infoWindowAjax?'<i class="iw-loader gmw-icon-spin-light animate-spin"></i>':o.gmwData.iwContent;var r={content:'<a class="iw-close-button gmw-icon-cancel-circled"></a>'+a,shadowStyle:0,padding:12,borderRadius:5,borderWidth:0,borderColor:"#ffffff",backgroundColor:"#ffffff",minWidth:"230",maxWidth:"230",minHeight:130,arrowSize:20,arrowPosition:50,arrowStyle:0,disableAutoPan:!1,hideCloseButton:!1,backgroundClassName:t};r=GMW.apply_filters("gmw_info_window_options",r,i,"infobubble"),i.activeInfoWindow=new InfoBubble(r),i.activeInfoWindow.open(i.map,o),1==i.infoWindowAjax?i.getIwAjaxContent(o.gmwData.markerCount,o):e.resize(n)},close:function(o){o.activeInfoWindow&&(jQuery(".gmw-info-window.map-"+o.id).remove(),o.activeInfoWindow.close(),o.activeInfoWindow=null)},resize:function(o){var n=this,e=o;setTimeout(function(){jQuery(".gmw-info-window.infobubble .iw-close-button").on("click",function(){n.close(o)})},100),setTimeout(function(){var o=jQuery(".gmw-info-window-inner.infobubble").height();o>250&&(o=250),jQuery(".gmw-info-window.infobubble").parent().height(o),e.activeInfoWindow.setPosition(e.activeMarker.getPosition()),jQuery(".gmw-info-window .iw-loader").hide()},100)}},infobox:{open:function(o,n){var e=n,i=e.getIwClassName(n),t=o.gmwData.iwContent;if(1==e.infoWindowAjax){var a=e.getIwTemplateName(e.infoWindowTemplate);i+=" gmw-"+e.prefix+"-ib-"+a+"-template-holder",t='<i class="iw-loader gmw-icon-spin-light animate-spin"></i>'}var r={boxClass:i,content:'<a class="iw-close-button gmw-icon-cancel-circled"></a>'+t,alignBottom:!0,position:e.map.getCenter(),disableAutoPan:!1,maxWidth:150,pixelOffset:new google.maps.Size(-128,-52),zIndex:null,closeBoxMargin:"12px 4px 2px 2px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(-70,60)};r=GMW.apply_filters("gmw_info_window_options",r,e,"infobox"),e.activeInfoWindow=new InfoBox(r),e.activeInfoWindow.open(e.map,o),setTimeout(function(){jQuery(".gmw-info-window.infobox .iw-close-button").click(function(){e.closeInfoWindow()})},500),1==e.infoWindowAjax&&e.getIwAjaxContent(o.gmwData.markerCount,o)},close:function(o){o.activeInfoWindow&&(o.activeInfoWindow.close(),o.activeInfoWindow=null)}},popup:{open:function(o,n){var e=n,i=e.getIwClassName(n),t="",a=!1,r=!1,p=!1;if(1==e.infoWindowAjax){var s=e.getIwTemplateName(e.infoWindowTemplate);i+=" gmw-"+e.prefix+"-iw-"+s+"-template-holder",a=!0}else t=o.gmwData.iwContent,r=!0,p=!0;var l=GMW.apply_filters("gmw_info_window_options",{"class":i,content:t,loader:a,closeButton:r,draggable:p},e,"popup");e.activeInfoWindow=new gmwPopupInfoWindow(l),jQuery(".gmw-info-window.popup").length?setTimeout(function(){e.activeInfoWindow.open()},300):e.activeInfoWindow.open(),setTimeout(function(){jQuery(document).on("click",".gmw-info-window.popup .iw-close-button",function(){e.closeInfoWindow()})},500),1==e.infoWindowAjax&&e.getIwAjaxContent(o.gmwData.markerCount,o)},close:function(o){o.activeInfoWindow&&(jQuery(".gmw-info-window.popup").fadeOut("fast",function(){jQuery(".gmw-info-window.popup").remove()}),o.activeInfoWindow=null)}}}),"undefined"!=typeof GMW_Map_Providers.leaflet&&(GMW_Map_Providers.leaflet.markerGroupingTypes.markers_clusterer={init:function(o){"function"==typeof L.markerClusterGroup&&(o.clusters=L.markerClusterGroup(o.options.markerClustersOptions),o.map.addLayer(o.clusters))},clear:function(o){"function"==typeof L.markerClusterGroup&&0!=o.clusters&&o.clusters.clearLayers()},addMarker:function(o,n){n.clusters.addLayer(o)},markerClick:function(o,n){o.on("click",function(){n.markerClick(this)})}},GMW_Map_Providers.leaflet.markerGroupingTypes.markers_spiderfier={init:function(o){"function"==typeof OverlappingMarkerSpiderfier&&(o.spiderfiers=new OverlappingMarkerSpiderfier(o.map,o.options.markerSpiderfierOptions),o.spiderfiers.addListener("click",function(n){o.openInfoWindow(n)}))},clear:function(o){},addMarker:function(o,n){o.addTo(n.map),n.spiderfiers.addMarker(o)},markerClick:function(o,n){}},GMW_Map_Providers.leaflet.infoWindowTypes={standard:{open:function(o,n){var e,i=n,t=i.getIwClassName(n);e=1==i.infoWindowAjax?'<i class="iw-loader gmw-icon-spin-light animate-spin"></i>':o.gmwData.iwContent;var a=GMW.apply_filters("gmw_info_window_options",{content:'<div class="'+t+'">'+e+"</div>",maxWidth:200,minWidth:200},i,"standard");i.activeInfoWindow=L.popup(a).setContent(a.content),o.unbindPopup().bindPopup(i.activeInfoWindow).openPopup(),1==i.infoWindowAjax&&i.getIwAjaxContent(o.gmwData.markerCount,o)},close:function(o){o.activeInfoWindow&&(o.activeInfoWindow=null)}},popup:{open:function(o,n){var e=n,i=e.getIwClassName(n),t="",a=!1,r=!1,p=!1;if(1==e.infoWindowAjax){var s=e.getIwTemplateName(e.infoWindowTemplate);i+=" gmw-"+e.prefix+"-iw-"+s+"-template-holder",a=!0}else t=o.gmwData.iwContent,r=!0,p=!0;var l=GMW.apply_filters("gmw_info_window_options",{"class":i,content:t,loader:a,closeButton:r,draggable:p},e,"popup");e.activeInfoWindow=new gmwPopupInfoWindow(l),jQuery(".gmw-info-window.popup").length?setTimeout(function(){e.activeInfoWindow.open()},300):e.activeInfoWindow.open(),setTimeout(function(){jQuery(document).on("click",".gmw-info-window.popup .iw-close-button",function(){e.closeInfoWindow()})},500),1==e.infoWindowAjax&&e.getIwAjaxContent(o.gmwData.markerCount,o)},close:function(o){o.activeInfoWindow&&(jQuery(".gmw-info-window.popup").fadeOut("fast",function(){jQuery(".gmw-info-window.popup").remove()}),o.activeInfoWindow=null)}}});